window.addEventListener("DOMContentLoaded",(()=>{document.querySelector("#sign-up-form")&&new Vue({vuetify:new Vuetify,template:'\n        <v-app>\n          <div class="py-6 px-4 pa-md-8 sign-up__form">\n            <header v-if="step !== 3" class="mb-6 mb-md-8 sign-up__header">\n              <h1 class="ma-0 mb-4 sign-up__title">\n                Great, let’s talk!\n              </h1>\n              <p class="ma-0 sign-up__description">\n                First, complete the form below to get registered with us. Shouldn’t take more than a couple of minutes.\n              </p>\n            </header>\n            <div class="sign-up__form_wrapper">\n              <menu v-if="step < 3" class="mb-8 d-flex sign-up__form_navigation">\n                <li :class="[\'text-center\', \'sign-up__form_navigation__item\', { active: step === 1 }]">\n                  <h2 class="ma-0">Step 1. Contact info</h2>\n                </li>\n                <li :class="[\'text-center\', \'sign-up__form_navigation__item\', { active: step === 2 }]">\n                  <h2 class="ma-0">Step 2. Address</h2>\n                </li>\n              </menu>\n              <div class="sign-up__form_steps__wrapper">\n                <v-form v-model="isStep[0]" v-show="step === 1" ref="formStepOne" class="sign-up__form_step">\n                  <input type="hidden" name="id" value="0" />\n                  <input type="hidden" name="gid" value="0" />\n                  <input type="hidden" name="emailpass" value="0" />\n                  <input type="hidden" name="cbsecuritym3" value="cbm_55015051_10ec1953_cb029ba04487cf136a3007af527d18c7" />\n                  <input type="hidden" name="cbrasitway" value="cbrv1_f5ec072c7c5a6c3380ec0c70af8fcf02_mQbjJiJi3V7iHokW" />\n                  <div class="d-flex justify-space-between form-fieldgroup appeal-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="cb_title" class="mb-1">Title</label>\n                      <v-select\n                        v-model="appeal"\n                        name="cb_title"\n                        id="cb_title"\n                        :items="fields.appeal.items"\n                        color="#021B28"\n                        placeholder="Please select"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="firstname" class="mb-1">First name</label>\n                      <v-text-field\n                        v-model="firstname"\n                        name="firstname"\n                        id="firstname"\n                        color="#021B28"\n                        :rules="rules.firstname"\n                        required\n                        placeholder="Enter first name"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="middlename" class="mb-1">Middle name</label>\n                      <v-text-field\n                        name="middlename"\n                        id="middlename"\n                        color="#021B28"\n                        :rules="rules.middlename"\n                        placeholder="Enter middle name"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="lastname" class="mb-1">Last name</label>\n                      <v-text-field\n                        name="lastname"\n                        id="lastname"\n                        color="#021B28"\n                        :rules="rules.lastname"\n                        required\n                        placeholder="Enter last name"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="username" class="mb-1">Username</label>\n                      <v-text-field\n                        name="username"\n                        id="username"\n                        color="#021B28"\n                        :rules="rules.username"\n                        required\n                        placeholder="Choose something unique (not your name)"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="email" class="mb-1">Email</label>\n                      <v-text-field\n                        v-model="email"\n                        name="email"\n                        id="email"\n                        type="email"\n                        color="#021B28"\n                        :rules="rules.email"\n                        required\n                        placeholder="Enter email"\n                        class="ma-0 pa-0"\n                        @input="emailConfirm = \'\'"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="email__verify" class="mb-1">Confirm email</label>\n                      <v-text-field\n                        v-model="emailConfirm"\n                        name="email__verify"\n                        id="email__verify"\n                        type="email"\n                        :rules="rules.emailConfirm"\n                        required\n                        placeholder="Retype email"\n                        color="#021B28"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="password" class="mb-1">Password</label>\n                      <v-text-field\n                        v-model="password"\n                        name="password"\n                        id="password"\n                        type="password"\n                        color="#021B28"\n                        :rules="rules.password"\n                        placeholder="Enter password"\n                        class="ma-0 pa-0"\n                        @input="passwordConfirm = \'\'"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="password__verify" class="mb-1">Confirm password</label>\n                      <v-text-field\n                        v-model="passwordConfirm"\n                        name="password__verify"\n                        id="password__verify"\n                        type="password"\n                        :rules="rules.passwordConfirm"\n                        placeholder="Retype password"\n                        color="#021B28"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="cb_homephoneno" class="mb-1">Telephone number</label>\n                      <v-text-field\n                        v-model="homephoneno"\n                        name="cb_homephoneno"\n                        id="cb_homephoneno"\n                        class="hidden-field"\n                      />\n                      <v-text-field\n                        v-model="notPureHomenumber"\n                        color="#021B28"\n                        :rules="rules.phonenumber"\n                        placeholder="(868)-XXX-XXXX"\n                        class="ma-0 pa-0"\n                        @focus="checkPhonePattern(\'notPureHomenumber\')"\n                        @keydown="$event => setPhonePattern(\'notPureHomenumber\', $event)"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="cb_mobile" class="mb-1">Cellphone number</label>\n                      <v-text-field\n                        v-model="mobile"\n                        name="cb_mobile"\n                        id="cb_mobile"\n                        class="hidden-field"\n                      />\n                      <v-text-field\n                        v-model="notPureMobileNumber"\n                        color="#021B28"\n                        :rules="rules.phonenumber"\n                        placeholder="(868)-XXX-XXXX"\n                        class="ma-0 pa-0"\n                        @focus="checkPhonePattern(\'notPureMobileNumber\')"\n                        @keydown="$event => setPhonePattern(\'notPureMobileNumber\', $event)"\n                      />\n                    </div>\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup birthday-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="cb_gender" class="mb-1">Gender</label>\n                      <v-select\n                        name="cb_gender"\n                        id="cb_gender"\n                        :items="fields.gender.items"\n                        color="#021B28"\n                        :rules="rules.select"\n                        required\n                        placeholder="Please select"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="birthday-month" class="mb-1">Birthday</label>\n                      <div class="d-flex justify-space-between field-birthday__wrapper">\n                        <v-text-field\n                          placeholder="Day"\n                          color="#021B28"\n                          :rules="rules.day"\n                          class="ma-0 pa-0"\n                          @input="value => setBirthday(\'day\', value)"\n                        />\n                        <v-text-field\n                          color="#021B28"\n                          :rules="rules.month"\n                          placeholder="Month"\n                          class="ma-0 pa-0"\n                          @input="value => setBirthday(\'month\', value)"\n                        />\n                        <v-text-field\n                          placeholder="Year"\n                          color="#021B28"\n                          :rules="rules.year"\n                          class="ma-0 pa-0"\n                          @input="value => setBirthday(\'year\', value)"\n                        />\n                        <v-text-field\n                          v-model="birthday"\n                          name="cb_birthdate"\n                          hidden\n                          class="ma-0 pa-0 hidden-field"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup taxpayer-fieldgroup">\n                    <div class="field-wrapper">\n                      <v-text-field\n                        name="cb_trn"\n                        id="cb_trn"\n                        value="11111"\n                        class="hidden-field"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="cb_preferredcurrency" class="mb-1">Currency</label>\n                      <v-select\n                        v-model="currency"\n                        name="cb_preferredcurrency"\n                        id="cb_preferredcurrency"\n                        item-text="label"\n                        item-value="value"\n                        :items="fields.currency.items"\n                        color="#021B28"\n                        :rules="rules.select"\n                        required\n                        placeholder="Please select"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                  </div>\n                </v-form>\n                <v-form v-model="isStep[1]" v-show="step === 2" ref="formStepTwo" class="sign-up__form_step">\n                  <input type="hidden" name="cb_borrowlendboth" value="Borrow" />\n                  <input type="hidden" name="cb_ipaddress" value />\n                  <input type="hidden" name="cb_wealthsource" value />\n                  <input type="hidden" name="cb_otherwealthsource" value />\n                  <input type="hidden" name="cb_tin" value />\n                  <div class="d-flex justify-space-between form-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="cb_street1" class="mb-1">Address line 1</label>\n                      <v-text-field\n                        ref="step2FirstInput"\n                        name="cb_street1"\n                        id="cb_street1"\n                        color="#021B28"\n                        :rules="rules.address"\n                        required\n                        placeholder="Enter address"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="cb_posttown" class="mb-1">Address line 2</label>\n                      <v-text-field\n                        name="cb_posttown"\n                        id="cb_posttown"\n                        color="#021B28"\n                        placeholder="Enter address"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="cb_street1" class="mb-1">Town/City</label>\n                      <v-text-field\n                        name="cb_county"\n                        id="cb_county"\n                        :rules="rules.textfield"\n                        required\n                        color="#021B28"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="cb_country" class="mb-1">Country</label>\n                      <v-select\n                        v-model="country"\n                        name="cb_country"\n                        id="cb_country"\n                        item-text="label"\n                        item-value="value"\n                        :items="fields.country.items"\n                        color="#021B28"\n                        :rules="rules.select"\n                        required\n                        placeholder="Please select"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <v-text-field\n                      name="cb_postcode"\n                      id="cb_postcode"\n                      hidden\n                      value=""\n                      class="hidden-field"\n                    />\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="cb_nationality" class="mb-1">Nationality</label>\n                      <v-select\n                        v-model="nationality"\n                        name="cb_nationality"\n                        id="cb_nationality"\n                        :items="fields.nationality.items"\n                        color="#021B28"\n                        :rules="rules.select"\n                        required\n                        placeholder="Please select"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <label for="cb_residentialstatus" class="mb-1">Residental status</label>\n                      <v-select\n                        name="cb_residentialstatus"\n                        id="cb_residentialstatus"\n                        :items="fields.residentialstatus.items"\n                        color="#021B28"\n                        :rules="rules.select"\n                        required\n                        placeholder="Please select"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                  </div>\n                  <div class="d-flex justify-space-between form-fieldgroup">\n                    <div class="field-wrapper">\n                      <label for="cb_howhearaboutus" class="mb-1">How did you find us?</label>\n                      <v-select\n                        name="cb_howhearaboutus"\n                        id="cb_howhearaboutus"\n                        :items="fields.howhearaboutus.items"\n                        color="#021B28"\n                        :rules="rules.select"\n                        required\n                        placeholder="Please select"\n                        class="ma-0 pa-0"\n                      />\n                    </div>\n                    <div class="field-wrapper">\n                      <v-text-field\n                        name="does_referral"\n                        id="does_referral"\n                        value="0"\n                        hidden\n                        class="hidden-field"\n                      />\n                      <v-text-field\n                        name="vm_memberid"\n                        hidden\n                        value=""\n                        class="hidden-field"\n                      />\n                    </div>\n                  </div>\n                  <div class="pa-4 pb-0 mb-3 mb-md-8 sign-up__form_connections">\n                    <label class="mb-2">Do you have any of the these connections to the United States?</label>\n                    <ul class="mb-3 mb-md-6">\n                      <li>You are a US citizen or resident</li>\n                      <li>You have a US address (residential or mailing) and/or telephone number</li>\n                      <li>You have a Power of Attorney or signing authority for a person in the US</li>\n                    </ul>\n                    <v-radio-group v-model="isusresident" name="cb_isusresident" class="ma-0 pa-0">\n                      <v-radio color="#F58220" label="No" value="0" />\n                      <v-radio color="#F58220" label="Yes" value="1" />\n                    </v-radio-group>\n                  </div>\n                  <div class="d-flex align-center justify-center justify-md-start sign-up__form_terms">\n                    <v-checkbox\n                      v-model="acceptedterms"\n                      false-value="0"\n                      true-value="1"\n                      :rules="[ v => !!v && v === \'1\' || \'Agreement is required\' ]"\n                      color="#F58220"\n                      label="Accept"\n                      required\n                    />\n                    <a class="ml-1">Terms and Conditions</a>\n                    <v-text-field\n                      v-model="acceptedterms"\n                      name="acceptedterms"\n                      hidden\n                      class="ma-0 pa-0 hidden-field"\n                    />\n                  </div>\n                  <input type="hidden" name="profiletype" value="person" />\n                  <input type="hidden" name="cb_profiletype" value="person" />\n                </v-form>\n              </div>\n            </div>\n            <footer class="pt-3 d-flex align-center justify-center justify-md-end sign-up__footer">\n              <v-btn\n                v-if="step === 1"\n                depressed\n                :disabled="!isStep[0]"\n                color="#F58220"\n                class="sign-up__footer_link"\n                @click="setStep(2)"\n              >\n                Next step\n              </v-btn>\n              <v-btn\n                v-if="step === 2"\n                depressed\n                color="#F58220"\n                class="sign-up__footer_link sign-up__footer_link__secondary"\n                @click="setStep(1)"\n              >\n                Previous step\n              </v-btn>\n              <v-btn\n                v-if="step === 2"\n                :disabled="!isStep[0] || !isStep[1]"\n                depressed\n                color="#F58220"\n                class="ml-2 ml-md-8 sign-up__footer_link"\n                @click="submit()"\n              >\n                Sign up\n              </v-btn>\n            </footer>\n            <div v-if="step === 3" class="d-flex flex-column align-start justify-space-between sign_up__result">\n              <div class="sign_up__result__content">\n                <h2 class="ma-0 pb-4">{{ globalStatus.message }}</h2>\n                <p class="mb-6 mb-md-8" v-if="globalStatus.isOk">\n                  Please check the email address that you provided at registration for an email titled "Please Confirm Email Address". Please follow the instructions in the email to complete your registration. Please check your junk or spam mail as well. To have the email resent, simply try logging in with the username and password of your sign up.\n                </p>\n                <p v-if="!globalStatus.isOk" class="mb-6 mb-md-8">Please, try again</p>\n              </div>\n              <a href="https://instaloan.massyfinance.com" v-if="globalStatus.isOk" class="sign-up__footer_link">Back to Home</a>\n              <a v-if="!globalStatus.isOk" @click="setStep(1)" class="sign-up__footer_link">Try Again</a>\n            </div>\n          </div>\n        </v-app>\n      ',data(){return{valid:!1,step:1,isStep:[!1,!1],globalStatus:{isOk:!1,message:""},fields:{appeal:{items:["Mr","Mrs","Miss","Ms","Rev","Dr","Prof"]},gender:{items:["Male","Female"]},currency:{items:[{label:"TT$",value:"TTD"},{label:"BBD",value:"BBD"},{label:"JMD",value:"JMD"}]},country:{items:[{label:"Trinidad And Tobago",value:"Trinidad And Tobago"}]},nationality:{items:[]},residentialstatus:{items:["Owner","Tenant","Living with Parents","Living with Partner","Other"]},howhearaboutus:{items:["Facebook","Instagram","Google","Website","Radio","Newspaper","Friend","Invitation","Online news","Magazine","TV","LinkedIn","Twitter","Comparison website","Google Organic","Google Paid","Bing Organic","Bing Paid","Yahoo","Promotech","Barbados Fertility Centre","ACE H&B Hardware","Gajah Home","Automotive Art","Innogen","Brancker's","Trowel Plastics","Ballyclare Dental","Armstrong Health Care Inc.","Coast to Coast Cooling","Victoria Mutual","Royale Computers and Accessories","Other","Don't know"]}},notPureHomenumber:"",notPureMobileNumber:"",firstname:"",appeal:"Mr",currency:"TTD",country:"Trinidad",homephoneno:"",mobile:"",isusresident:"0",acceptedterms:"0",password:"",passwordConfirm:"",email:"",emailConfirm:"",nationality:"Trinidad And Tobago",birthdayParts:{year:"",month:"",day:""},birthday:"",rules:{middlename:[e=>/^[a-zA-Z, ]+$/.test(e)||""===e||"Field must contain only letters"],firstname:[e=>!!e&&!!e.trim()||"Enter first name",e=>/^[a-zA-Z, ]+$/.test(e)||"Field must contain only letters"],lastname:[e=>!!e&&!!e.trim()||"Enter last name",e=>/^[a-zA-Z, ]+$/.test(e)||"Field must contain only letters"],username:[e=>!!e&&!!e.trim()||"Enter username",e=>!!e&&e.length>2&&e.length<11||"Username should consist of 3-10 characters"],textfield:[e=>!!e&&!!e.trim()||"This field is required",e=>/^[a-zA-Z, ]+$/.test(e)||"Field must contain only letters"],address:[e=>!!e&&!!e.trim()||"This field is required"],select:[e=>!!e||"This field is required"],number:[e=>!!e&&!!e.trim()||"This field is required",e=>/^[0-9]+$/.test(e)||"Field must contain only digits"],phonenumber:[e=>!!e||"This field is required",e=>!!e&&"("===e[0]&&"8"===e[1]&&"6"===e[2]&&"8"===e[3]&&")"===e[4]&&"-"===e[5]||"Phone number should match pattern (868)-XXX-XXXX",e=>!!e&&14===e.length||"Field must contain 10 digits"],month:[e=>!!e&&!!e.trim()||"This field is required",e=>/^[0-9]+$/.test(e)||"Field must contain only digits",e=>!!e&&e.length<3||"Field must contain 1-2 digits",e=>!!e&&e>0&&e<13||"Not correct month"],day:[e=>!!e&&!!e.trim()||"This field is required",e=>/^[0-9]+$/.test(e)||"Field must contain only digits",e=>!!e&&e.length<3||"Field must contain 1-2 digits",e=>!!e&&e>0&&e<32||"Not correct day"],year:[e=>!!e&&!!e.trim()||"This field is required",e=>/^[0-9]+$/.test(e)||"Field must contain only digits",e=>!!e&&4===e.length||"Field must contain 4 digits",e=>!!e&&e>1932&&e<(new Date).getFullYear()-18||"Not correct year"],password:[e=>!!e&&!!e.trim()||"This field is required",e=>!!e&&e.length>5||"Password should contain at least 6 characters"],passwordConfirm:[e=>!!e&&!!e.trim()||"This field is required",e=>!!e&&e===this.password||"Password should match"],email:[e=>!!e&&!!e.trim()||"This field is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid",e=>e.length<=254||"Too long E-mail"],emailConfirm:[e=>!!e&&!!e.trim()||"This field is required",e=>!!e&&e===this.email||"Email should match"]}}},watch:{notPureHomenumber(e){const n=e.replace("-"," ").replace("-"," ");this.homephoneno=n},notPureMobileNumber(e){const n=e.replace("-"," ").replace("-"," ");this.mobile=n}},created(){try{fetch("https://antonmiazyn.github.io/projects/insta-loan-sign-up/nationality.json").then((e=>e.json())).then((e=>{e.forEach((e=>{this.fields.nationality.items.push(e)}))}))}catch(e){console.log("Can't get nationalities list")}},methods:{setStep(e){this.step=e,window.scrollTo(0,0)},setBirthday(e,n){if(this.birthdayParts[e]=n,this.birthdayParts.year&&this.birthdayParts.month&&this.birthdayParts.day){const e=this.birthdayParts.month<10&&1===this.birthdayParts.month.length?"0"+this.birthdayParts.month:this.birthdayParts.month,n=this.birthdayParts.day<10&&1===this.birthdayParts.day.length?"0"+this.birthdayParts.day:this.birthdayParts.day;this.birthday=`${this.birthdayParts.year}-${e}-${n}`}},setPhonePattern(e,n){Number(n.key)||"0"===n.key?(n.preventDefault(),this[e].length>5&&this[e].length<9?this[e]+=n.key:9===this[e].length?this[e]+="-"+n.key:this[e].length>9&&this[e].length<14?this[e]+=n.key:this[e]+=""):"Backspace"===n.key?this[e].length<=6&&n.preventDefault():"Tab"!==n.key&&n.preventDefault()},checkPhonePattern(e){this[e].length||(this[e]="(868)-")},async submit(){if(this.$refs.formStepOne.validate()&&this.$refs.formStepOne.validate()){const e=new FormData;new Promise((n=>{const s=new FormData(this.$refs.formStepOne.$el);for(const[n,a]of s)e.append(n,a);const a=new FormData(this.$refs.formStepTwo.$el);for(const[n,s]of a)e.append(n,s);n()})).then((()=>{fetch("https://www.carilend.com/index.php?option=com_comprofiler&view=saveregisters&Itemid=4192",{method:"POST",body:e}).then((e=>e.text())).then((e=>{(new DOMParser).parseFromString(e,"text/html")?(this.globalStatus.isOk=!0,this.globalStatus.message="Successfully registered!",this.setStep(3)):(this.globalStatus.isOk=!1,this.globalStatus.message="Something went wrong...",this.setStep(3))})).catch((e=>{console.log(e),this.globalStatus.isOk=!1,this.globalStatus.message="Something went wrong...",this.setStep(3)}))}))}}}}).$mount("#sign-up-form")}));